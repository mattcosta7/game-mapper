<div class='row'>
  <div class='small-6 large-6 columns'>
    <ol>
      <li>
        <%= @game.date %>
        <%= @game.sport_name %>
        <br>
        <%= @game.skill %>
        <br>
        Created By: <%= @game.creator.name %>
        <ul>
          Attendees:
          <% @game.attendees.each do |attendee| %>
            <li><%=attendee.name%></li>
          <%end%>
        </ul>
      </li>
      <% if @game.attendees.include?(current_user) %>
        <%=link_to "Leave Game", destroy_game_attendee_path(@game), method: :delete %>
      <% else %>
        <%=link_to "Join Game", create_game_attendee_path(@game), method: :post %>
      <%end%>
    </ol>
  </div>
  <div class='small-6 large-6 columns'>
    <div id='map'></div>
  </div>
</div>

<script type="text/javascript">
  var map,lat,long;
  function initMap() {
    var myLatLng = {lat: <%=@game.latitude%>, lng: <%=@game.longitude%>};
      map = new google.maps.Map(document.getElementById('map'), {
        center: myLatLng,
        scrollwheel: false,
        zoom: 15
      });
        var contentString = "<%=@game.display_time%><br><%=@game.sport_name%><br><%=@game.skill%>";
        var infowindow<%=@game.id%> = new google.maps.InfoWindow({
          content: contentString
        });
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: '<%=@game.sport_name%>',
            animation: google.maps.Animation.DROP
          });
        google.maps.event.addListener(marker, 'click',function() {
            infowindow<%=@game.id%>.open(map, this);
         });
    }
</script>
<script src='https://maps.googleapis.com/maps/api/js?key=<%=Rails.application.secrets.gmaps%>&callback=initMap'></script>
